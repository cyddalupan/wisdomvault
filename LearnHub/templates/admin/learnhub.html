{% extends "admin/base_site.html" %}

{% load crispy_forms_tags %}

{% block content %}
<div class="container">
  <div>
    <strong>Overall Progress:</strong>
    <div class="progress mt-3">
      <div class="progress-bar progress-bar-striped progress-bar-animated bg-success" role="progressbar"
        style="width: {{ overall_score }}%;" aria-valuenow="{{ overall_score }}" aria-valuemin="0" aria-valuemax="100">
        {{ overall_score }}% Complete
      </div>
    </div>
  </div>
  <br />
  <div>
    <strong>Topic Progress:</strong>
    <div class="progress mt-3">
      <div class="progress-bar progress-bar-striped progress-bar-animated bg-info" role="progressbar"
        style="width: {{ topic_score }}%;" aria-valuenow="{{ topic_score }}" aria-valuemin="0" aria-valuemax="100">
        {{ topic_score }}% Complete
      </div>
    </div>
  </div>

  <h1 class="mt-4">LearnHub</h1>

  <!-- AI Response Section -->
  {% if ai_response %}
  <div class="w-100 mb-3 p-3 border rounded bg-light">
    <h2 class="border-bottom pb-2 border-success">KENSHI</h2>
    <p>{{ ai_response }}</p>
  </div>
  {% endif %}

  <!-- Student Form Section -->
  <div class="w-100 p-3 border rounded bg-white">
    <h2 class="border-bottom pb-2 border-success">Student</h2>
    <form method="post" class="mt-3">
      {% csrf_token %}
      {% if form %}
      <div class="row align-items-end">
        <div class="col-md-9">
          {{ form|crispy }}
        </div>
        <div class="col-md-3 text-end">
          <button type="submit" class="btn btn-success w-100">Submit</button>
        </div>
      </div>
      {% else %}
      <p>Form is not available</p>
      {% endif %}
    </form>
  </div>
</div>
{% endblock %}